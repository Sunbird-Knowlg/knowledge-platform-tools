import { Component } from '@angular/core';
import * as API from '../../constants/app-constant';
import { labels } from '../../labels/strings';
import * as i0 from "@angular/core";
import * as i1 from "../../services/approval.service";
import * as i2 from "../../services/framework.service";
import * as i3 from "@angular/common";
import * as i4 from "@angular/router";
import * as i5 from "@angular/material/icon";
import * as i6 from "@angular/material/card";
import * as i7 from "@angular/material/tooltip";
import * as i8 from "../../pipes/order-by.pipe";
import * as i9 from "../../pipes/date.pipe";
export class PendingApprovalComponent {
    constructor(approvalService, frameworkService) {
        this.approvalService = approvalService;
        this.frameworkService = frameworkService;
        this.pendingList = [];
        this.approvalList = [];
        this.categories = [];
        this.app_strings = labels;
    }
    ngOnInit() {
        this.getApprovalList();
        this.frameworkService.getFrameworkInfo().subscribe(res => {
            this.categories = res.result.framework.categories.map(d => d.code);
        });
    }
    getApprovalList() {
        const payload = { applicationStatus: API.APPROVAL.LEVEL1, serviceName: API.APPROVAL.SERVICE_NAME };
        this.approvalService.getApprovalList(payload).subscribe((res) => {
            this.approvalList = res.result.data;
        });
    }
    removeDuplicates(arr) {
        return [...new Set(arr)];
    }
    createApprovalList(updateFieldValues) {
        let updateFileds = [];
        let categories = [];
        let approvalList = [];
        updateFileds = JSON.parse(updateFieldValues);
        categories = updateFileds.map(fd => fd.category);
        categories = this.removeDuplicates(categories);
        categories.forEach((c) => {
            let temp = { name: '', terms: [], children: [] };
            temp.name = c,
                temp.children = updateFileds.filter(term => term.category === c);
            approvalList.push(temp);
        });
        return approvalList;
    }
    getTerms(terms) {
        const temp = terms.map(t => t.name);
        const t = temp.shift();
        return temp;
    }
}
PendingApprovalComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: PendingApprovalComponent, deps: [{ token: i1.ApprovalService }, { token: i2.FrameworkService }], target: i0.ɵɵFactoryTarget.Component });
PendingApprovalComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.3.0", type: PendingApprovalComponent, selector: "lib-pending-approval", ngImport: i0, template: "<div class=\"pending-approval\">\n    <header class=\"mat-header\">\n        <h2>{{app_strings.pendingApproval}} ({{approvalList.length}})</h2>\n    </header>\n\n    <mat-card *ngFor=\"let p of approvalList | orderBy\">\n\n        <mat-card-content>\n            <span class=\"date\">\n                <h4>{{app_strings.date}}</h4>\n                <span>{{p.lastUpdatedOn | date}}</span>\n            </span>\n            <div *ngFor=\"let t of createApprovalList(p.updateFieldValues)\" class=\"col\">\n                <h4>{{t.name}}</h4>\n                <div matTooltip=\"{{getTerms(t.children)}}\" matTooltipPosition=\"above\" matTooltipClass=\"custom-tooltip\">\n                    {{t.children[0].name}}\n                    <ng-container *ngIf=\"t.children.length>1\">\n                        & {{t.children.length-1}} {{app_strings.more}}\n                    </ng-container>\n                </div>\n            </div>\n            <a class=\"approve-view-link\" routerLink=\"/approval/{{p.wfId}}\"><mat-icon>{{app_strings.rightArrow}}</mat-icon></a>\n        </mat-card-content>\n    </mat-card>\n    <!-- <mat-tab-group mat-align-tabs=\"center\" animationDuration=\"0ms\">\n        <mat-tab label=\"Sent for approval\" active>  -->\n    <!-- <mat-card>\n                <mat-card-content>\n                <div *ngFor=\"let t of categories\" class=\"col\">\n                        <h4>{{t}}</h4>\n                </div>\n                </mat-card-content>\n            </mat-card> -->\n    <!-- <mat-card *ngFor=\"let p of approvalList\">\n                    <mat-card-content>\n                        <div *ngFor=\"let t of createApprovalList(p.updateFieldValues)\" class=\"col\">\n                                <h4>{{t.name}}</h4>\n                                <div matTooltip=\"{{getTerms(t.children)}}\" matTooltipPosition=\"above\" matTooltipClass=\"custom-tooltip\">\n                                        {{t.children[0].name}}\n                                        <ng-container *ngIf=\"t.children.length>1\">\n                                        & {{t.children.length-1}} more...\n                                        </ng-container>\n                                </div>\n                              \n                        </div> \n                        <a class=\"approve-view-link\" routerLink=\"/approval/{{p.wfId}}\"><mat-icon>keyboard_arrow_right</mat-icon></a>\n                    </mat-card-content>\n            </mat-card>\n        </mat-tab> -->\n    <!-- <mat-tab label=\"Approved\"> Approved </mat-tab>\n        <mat-tab label=\"Rejected\"> Rejected </mat-tab> -->\n    <!-- </mat-tab-group> -->\n\n</div>", styles: [".pending-approval{padding:0 15px}.pending-approval h2{font-weight:400}.pending-approval .mat-tab-group ::ng-deep .mat-tab-header{background-color:#fff}.pending-approval .mat-tab-group ::ng-deep .mat-tab-header .mat-tab-label{padding:0 10px}.pending-approval .mat-tab-group ::ng-deep .mat-tab-header .mat-tab-label .mat-tab-label-content{color:#000}.pending-approval .mat-tab-group ::ng-deep .mat-tab-header .mat-tab-label-active{background:#FFFFFF}.pending-approval .mat-tab-group ::ng-deep .mat-tab-header .mat-tab-label-active .mat-tab-label-content{color:#000}.pending-approval .mat-card{background:#F3F3F3;margin-top:25px;padding:5px 0;box-shadow:none}.pending-approval .mat-card-content{display:flex;flex-direction:row;justify-content:left;align-items:center;padding-left:4%;position:relative}.pending-approval .mat-card-content h4{text-transform:capitalize;padding:0;margin:10px 0}.pending-approval .mat-card-content .approve-view-link{position:absolute;right:4%}.pending-approval .col{display:flex;flex-direction:column;padding-right:100px}.pending-approval .col div{cursor:pointer;font-size:20px}::ng-deep .custom-tooltip{font-size:16px;background:#FFFFFF!important;color:#000!important;padding:10px 0}::ng-deep .mat-icon{font-size:40px;color:#363636;cursor:pointer}.date{padding:0 20px;font-weight:600}\n"], dependencies: [{ kind: "directive", type: i3.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i4.RouterLinkWithHref, selector: "a[routerLink],area[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "component", type: i5.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: i6.MatCard, selector: "mat-card", exportAs: ["matCard"] }, { kind: "directive", type: i6.MatCardContent, selector: "mat-card-content, [mat-card-content], [matCardContent]" }, { kind: "directive", type: i7.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { kind: "pipe", type: i8.OrderByPipe, name: "orderBy" }, { kind: "pipe", type: i9.DatePipe, name: "date" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.3.0", ngImport: i0, type: PendingApprovalComponent, decorators: [{
            type: Component,
            args: [{ selector: 'lib-pending-approval', template: "<div class=\"pending-approval\">\n    <header class=\"mat-header\">\n        <h2>{{app_strings.pendingApproval}} ({{approvalList.length}})</h2>\n    </header>\n\n    <mat-card *ngFor=\"let p of approvalList | orderBy\">\n\n        <mat-card-content>\n            <span class=\"date\">\n                <h4>{{app_strings.date}}</h4>\n                <span>{{p.lastUpdatedOn | date}}</span>\n            </span>\n            <div *ngFor=\"let t of createApprovalList(p.updateFieldValues)\" class=\"col\">\n                <h4>{{t.name}}</h4>\n                <div matTooltip=\"{{getTerms(t.children)}}\" matTooltipPosition=\"above\" matTooltipClass=\"custom-tooltip\">\n                    {{t.children[0].name}}\n                    <ng-container *ngIf=\"t.children.length>1\">\n                        & {{t.children.length-1}} {{app_strings.more}}\n                    </ng-container>\n                </div>\n            </div>\n            <a class=\"approve-view-link\" routerLink=\"/approval/{{p.wfId}}\"><mat-icon>{{app_strings.rightArrow}}</mat-icon></a>\n        </mat-card-content>\n    </mat-card>\n    <!-- <mat-tab-group mat-align-tabs=\"center\" animationDuration=\"0ms\">\n        <mat-tab label=\"Sent for approval\" active>  -->\n    <!-- <mat-card>\n                <mat-card-content>\n                <div *ngFor=\"let t of categories\" class=\"col\">\n                        <h4>{{t}}</h4>\n                </div>\n                </mat-card-content>\n            </mat-card> -->\n    <!-- <mat-card *ngFor=\"let p of approvalList\">\n                    <mat-card-content>\n                        <div *ngFor=\"let t of createApprovalList(p.updateFieldValues)\" class=\"col\">\n                                <h4>{{t.name}}</h4>\n                                <div matTooltip=\"{{getTerms(t.children)}}\" matTooltipPosition=\"above\" matTooltipClass=\"custom-tooltip\">\n                                        {{t.children[0].name}}\n                                        <ng-container *ngIf=\"t.children.length>1\">\n                                        & {{t.children.length-1}} more...\n                                        </ng-container>\n                                </div>\n                              \n                        </div> \n                        <a class=\"approve-view-link\" routerLink=\"/approval/{{p.wfId}}\"><mat-icon>keyboard_arrow_right</mat-icon></a>\n                    </mat-card-content>\n            </mat-card>\n        </mat-tab> -->\n    <!-- <mat-tab label=\"Approved\"> Approved </mat-tab>\n        <mat-tab label=\"Rejected\"> Rejected </mat-tab> -->\n    <!-- </mat-tab-group> -->\n\n</div>", styles: [".pending-approval{padding:0 15px}.pending-approval h2{font-weight:400}.pending-approval .mat-tab-group ::ng-deep .mat-tab-header{background-color:#fff}.pending-approval .mat-tab-group ::ng-deep .mat-tab-header .mat-tab-label{padding:0 10px}.pending-approval .mat-tab-group ::ng-deep .mat-tab-header .mat-tab-label .mat-tab-label-content{color:#000}.pending-approval .mat-tab-group ::ng-deep .mat-tab-header .mat-tab-label-active{background:#FFFFFF}.pending-approval .mat-tab-group ::ng-deep .mat-tab-header .mat-tab-label-active .mat-tab-label-content{color:#000}.pending-approval .mat-card{background:#F3F3F3;margin-top:25px;padding:5px 0;box-shadow:none}.pending-approval .mat-card-content{display:flex;flex-direction:row;justify-content:left;align-items:center;padding-left:4%;position:relative}.pending-approval .mat-card-content h4{text-transform:capitalize;padding:0;margin:10px 0}.pending-approval .mat-card-content .approve-view-link{position:absolute;right:4%}.pending-approval .col{display:flex;flex-direction:column;padding-right:100px}.pending-approval .col div{cursor:pointer;font-size:20px}::ng-deep .custom-tooltip{font-size:16px;background:#FFFFFF!important;color:#000!important;padding:10px 0}::ng-deep .mat-icon{font-size:40px;color:#363636;cursor:pointer}.date{padding:0 20px;font-weight:600}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.ApprovalService }, { type: i2.FrameworkService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGVuZGluZy1hcHByb3ZhbC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zYi10YXhvbm9teS1lZGl0b3Ivc3JjL2xpYi9jb21wb25lbnRzL3BlbmRpbmctYXBwcm92YWwvcGVuZGluZy1hcHByb3ZhbC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9zYi10YXhvbm9teS1lZGl0b3Ivc3JjL2xpYi9jb21wb25lbnRzL3BlbmRpbmctYXBwcm92YWwvcGVuZGluZy1hcHByb3ZhbC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUE2QixNQUFNLGVBQWUsQ0FBQztBQUVyRSxPQUFPLEtBQUssR0FBRyxNQUFNLDhCQUE4QixDQUFDO0FBR3BELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQzs7Ozs7Ozs7Ozs7QUFPOUMsTUFBTSxPQUFPLHdCQUF3QjtJQUtuQyxZQUFvQixlQUFnQyxFQUFVLGdCQUFrQztRQUE1RSxvQkFBZSxHQUFmLGVBQWUsQ0FBaUI7UUFBVSxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBSmhHLGdCQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLGlCQUFZLEdBQUcsRUFBRSxDQUFDO1FBQ2xCLGVBQVUsR0FBRyxFQUFFLENBQUM7UUFDaEIsZ0JBQVcsR0FBUSxNQUFNLENBQUM7SUFDMEUsQ0FBQztJQUVyRyxRQUFRO1FBQ0osSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFBO1FBQ3RCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUN2RCxJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDcEUsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBRUQsZUFBZTtRQUNiLE1BQU0sT0FBTyxHQUFtQixFQUFFLGlCQUFpQixFQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLFdBQVcsRUFBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRSxDQUFBO1FBQ2hILElBQUksQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQU8sRUFBRSxFQUFFO1lBQ2pFLElBQUksQ0FBQyxZQUFZLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUE7UUFDdEMsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBRUQsZ0JBQWdCLENBQUMsR0FBRztRQUNsQixPQUFPLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzNCLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxpQkFBaUI7UUFDbEMsSUFBSSxZQUFZLEdBQUcsRUFBRSxDQUFBO1FBQ3JCLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQTtRQUNuQixJQUFJLFlBQVksR0FBRyxFQUFFLENBQUE7UUFDckIsWUFBWSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUM3QyxVQUFVLEdBQUksWUFBWSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUNqRCxVQUFVLEdBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQy9DLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUN2QixJQUFJLElBQUksR0FBRyxFQUFDLElBQUksRUFBQyxFQUFFLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFDLENBQUE7WUFDNUMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDO2dCQUNiLElBQUksQ0FBQyxRQUFRLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUE7WUFDaEUsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUN2QixDQUFDLENBQUMsQ0FBQTtRQUNGLE9BQU8sWUFBWSxDQUFBO0lBQ3ZCLENBQUM7SUFFRCxRQUFRLENBQUMsS0FBVTtRQUNmLE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ3RCLE9BQU8sSUFBSSxDQUFBO0lBQ2YsQ0FBQzs7cUhBN0NVLHdCQUF3Qjt5R0FBeEIsd0JBQXdCLDREQ1pyQyxpbkZBcURNOzJGRHpDTyx3QkFBd0I7a0JBTHBDLFNBQVM7K0JBQ0Usc0JBQXNCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBcHByb3ZhbFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hcHByb3ZhbC5zZXJ2aWNlJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuLi8uLi9jb25zdGFudHMvYXBwLWNvbnN0YW50JztcbmltcG9ydCB7IEZyYW1ld29ya1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9mcmFtZXdvcmsuc2VydmljZSc7XG5pbXBvcnQgKiBhcyBJQXBwIGZyb20gJy4uLy4uL21vZGVscy9hcHByb3ZhbC5tb2RlbCc7XG5pbXBvcnQgeyBsYWJlbHMgfSBmcm9tICcuLi8uLi9sYWJlbHMvc3RyaW5ncyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xpYi1wZW5kaW5nLWFwcHJvdmFsJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3BlbmRpbmctYXBwcm92YWwuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9wZW5kaW5nLWFwcHJvdmFsLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgUGVuZGluZ0FwcHJvdmFsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgcGVuZGluZ0xpc3QgPSBbXTtcbiAgYXBwcm92YWxMaXN0ID0gW107XG4gIGNhdGVnb3JpZXMgPSBbXTtcbiAgYXBwX3N0cmluZ3M6IGFueSA9IGxhYmVscztcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHByb3ZhbFNlcnZpY2U6IEFwcHJvdmFsU2VydmljZSwgcHJpdmF0ZSBmcmFtZXdvcmtTZXJ2aWNlOiBGcmFtZXdvcmtTZXJ2aWNlKSB7IH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICAgIHRoaXMuZ2V0QXBwcm92YWxMaXN0KClcbiAgICAgIHRoaXMuZnJhbWV3b3JrU2VydmljZS5nZXRGcmFtZXdvcmtJbmZvKCkuc3Vic2NyaWJlKHJlcyA9PiB7XG4gICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHJlcy5yZXN1bHQuZnJhbWV3b3JrLmNhdGVnb3JpZXMubWFwKGQgPT4gZC5jb2RlKVxuICAgICAgfSlcbiAgfVxuXG4gIGdldEFwcHJvdmFsTGlzdCgpIHtcbiAgICBjb25zdCBwYXlsb2FkOiBJQXBwLklBcHByb3ZhbCA9IHsgYXBwbGljYXRpb25TdGF0dXM6QVBJLkFQUFJPVkFMLkxFVkVMMSwgc2VydmljZU5hbWU6QVBJLkFQUFJPVkFMLlNFUlZJQ0VfTkFNRSB9XG4gICAgdGhpcy5hcHByb3ZhbFNlcnZpY2UuZ2V0QXBwcm92YWxMaXN0KHBheWxvYWQpLnN1YnNjcmliZSgocmVzOmFueSkgPT4ge1xuICAgICAgIHRoaXMuYXBwcm92YWxMaXN0ID0gcmVzLnJlc3VsdC5kYXRhXG4gICAgfSlcbiAgfVxuXG4gIHJlbW92ZUR1cGxpY2F0ZXMoYXJyKSB7XG4gICAgcmV0dXJuIFsuLi5uZXcgU2V0KGFycildO1xuICB9XG5cbiAgY3JlYXRlQXBwcm92YWxMaXN0KHVwZGF0ZUZpZWxkVmFsdWVzKXtcbiAgICBsZXQgdXBkYXRlRmlsZWRzID0gW11cbiAgICBsZXQgY2F0ZWdvcmllcyA9IFtdXG4gICAgbGV0IGFwcHJvdmFsTGlzdCA9IFtdXG4gICAgdXBkYXRlRmlsZWRzID0gSlNPTi5wYXJzZSh1cGRhdGVGaWVsZFZhbHVlcyk7XG4gICAgY2F0ZWdvcmllcyA9ICB1cGRhdGVGaWxlZHMubWFwKGZkID0+IGZkLmNhdGVnb3J5KVxuICAgIGNhdGVnb3JpZXMgPSAgdGhpcy5yZW1vdmVEdXBsaWNhdGVzKGNhdGVnb3JpZXMpXG4gICAgY2F0ZWdvcmllcy5mb3JFYWNoKChjKSA9PiB7XG4gICAgICBsZXQgdGVtcCA9IHtuYW1lOicnLCB0ZXJtczpbXSwgY2hpbGRyZW46IFtdfVxuICAgICAgdGVtcC5uYW1lID0gYyxcbiAgICAgIHRlbXAuY2hpbGRyZW4gPSB1cGRhdGVGaWxlZHMuZmlsdGVyKHRlcm0gPT4gdGVybS5jYXRlZ29yeSA9PT0gYylcbiAgICAgIGFwcHJvdmFsTGlzdC5wdXNoKHRlbXApXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGFwcHJvdmFsTGlzdFxuICB9XG5cbiAgZ2V0VGVybXModGVybXM6IGFueSl7XG4gICAgICBjb25zdCB0ZW1wID0gdGVybXMubWFwKHQgPT4gdC5uYW1lKTtcbiAgICAgIGNvbnN0IHQgPSB0ZW1wLnNoaWZ0KClcbiAgICAgIHJldHVybiB0ZW1wXG4gIH1cblxufVxuIiwiPGRpdiBjbGFzcz1cInBlbmRpbmctYXBwcm92YWxcIj5cbiAgICA8aGVhZGVyIGNsYXNzPVwibWF0LWhlYWRlclwiPlxuICAgICAgICA8aDI+e3thcHBfc3RyaW5ncy5wZW5kaW5nQXBwcm92YWx9fSAoe3thcHByb3ZhbExpc3QubGVuZ3RofX0pPC9oMj5cbiAgICA8L2hlYWRlcj5cblxuICAgIDxtYXQtY2FyZCAqbmdGb3I9XCJsZXQgcCBvZiBhcHByb3ZhbExpc3QgfCBvcmRlckJ5XCI+XG5cbiAgICAgICAgPG1hdC1jYXJkLWNvbnRlbnQ+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRhdGVcIj5cbiAgICAgICAgICAgICAgICA8aDQ+e3thcHBfc3RyaW5ncy5kYXRlfX08L2g0PlxuICAgICAgICAgICAgICAgIDxzcGFuPnt7cC5sYXN0VXBkYXRlZE9uIHwgZGF0ZX19PC9zcGFuPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPGRpdiAqbmdGb3I9XCJsZXQgdCBvZiBjcmVhdGVBcHByb3ZhbExpc3QocC51cGRhdGVGaWVsZFZhbHVlcylcIiBjbGFzcz1cImNvbFwiPlxuICAgICAgICAgICAgICAgIDxoND57e3QubmFtZX19PC9oND5cbiAgICAgICAgICAgICAgICA8ZGl2IG1hdFRvb2x0aXA9XCJ7e2dldFRlcm1zKHQuY2hpbGRyZW4pfX1cIiBtYXRUb29sdGlwUG9zaXRpb249XCJhYm92ZVwiIG1hdFRvb2x0aXBDbGFzcz1cImN1c3RvbS10b29sdGlwXCI+XG4gICAgICAgICAgICAgICAgICAgIHt7dC5jaGlsZHJlblswXS5uYW1lfX1cbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInQuY2hpbGRyZW4ubGVuZ3RoPjFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICYge3t0LmNoaWxkcmVuLmxlbmd0aC0xfX0ge3thcHBfc3RyaW5ncy5tb3JlfX1cbiAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxhIGNsYXNzPVwiYXBwcm92ZS12aWV3LWxpbmtcIiByb3V0ZXJMaW5rPVwiL2FwcHJvdmFsL3t7cC53ZklkfX1cIj48bWF0LWljb24+e3thcHBfc3RyaW5ncy5yaWdodEFycm93fX08L21hdC1pY29uPjwvYT5cbiAgICAgICAgPC9tYXQtY2FyZC1jb250ZW50PlxuICAgIDwvbWF0LWNhcmQ+XG4gICAgPCEtLSA8bWF0LXRhYi1ncm91cCBtYXQtYWxpZ24tdGFicz1cImNlbnRlclwiIGFuaW1hdGlvbkR1cmF0aW9uPVwiMG1zXCI+XG4gICAgICAgIDxtYXQtdGFiIGxhYmVsPVwiU2VudCBmb3IgYXBwcm92YWxcIiBhY3RpdmU+ICAtLT5cbiAgICA8IS0tIDxtYXQtY2FyZD5cbiAgICAgICAgICAgICAgICA8bWF0LWNhcmQtY29udGVudD5cbiAgICAgICAgICAgICAgICA8ZGl2ICpuZ0Zvcj1cImxldCB0IG9mIGNhdGVnb3JpZXNcIiBjbGFzcz1cImNvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg0Pnt7dH19PC9oND5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L21hdC1jYXJkLWNvbnRlbnQ+XG4gICAgICAgICAgICA8L21hdC1jYXJkPiAtLT5cbiAgICA8IS0tIDxtYXQtY2FyZCAqbmdGb3I9XCJsZXQgcCBvZiBhcHByb3ZhbExpc3RcIj5cbiAgICAgICAgICAgICAgICAgICAgPG1hdC1jYXJkLWNvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0Zvcj1cImxldCB0IG9mIGNyZWF0ZUFwcHJvdmFsTGlzdChwLnVwZGF0ZUZpZWxkVmFsdWVzKVwiIGNsYXNzPVwiY29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND57e3QubmFtZX19PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBtYXRUb29sdGlwPVwie3tnZXRUZXJtcyh0LmNoaWxkcmVuKX19XCIgbWF0VG9vbHRpcFBvc2l0aW9uPVwiYWJvdmVcIiBtYXRUb29sdGlwQ2xhc3M9XCJjdXN0b20tdG9vbHRpcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7dC5jaGlsZHJlblswXS5uYW1lfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwidC5jaGlsZHJlbi5sZW5ndGg+MVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYge3t0LmNoaWxkcmVuLmxlbmd0aC0xfX0gbW9yZS4uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJhcHByb3ZlLXZpZXctbGlua1wiIHJvdXRlckxpbms9XCIvYXBwcm92YWwve3twLndmSWR9fVwiPjxtYXQtaWNvbj5rZXlib2FyZF9hcnJvd19yaWdodDwvbWF0LWljb24+PC9hPlxuICAgICAgICAgICAgICAgICAgICA8L21hdC1jYXJkLWNvbnRlbnQ+XG4gICAgICAgICAgICA8L21hdC1jYXJkPlxuICAgICAgICA8L21hdC10YWI+IC0tPlxuICAgIDwhLS0gPG1hdC10YWIgbGFiZWw9XCJBcHByb3ZlZFwiPiBBcHByb3ZlZCA8L21hdC10YWI+XG4gICAgICAgIDxtYXQtdGFiIGxhYmVsPVwiUmVqZWN0ZWRcIj4gUmVqZWN0ZWQgPC9tYXQtdGFiPiAtLT5cbiAgICA8IS0tIDwvbWF0LXRhYi1ncm91cD4gLS0+XG5cbjwvZGl2PiJdfQ==